Bootstrap: library
From: ubuntu:20.04

### references
# https://github.com/NIH-HPC/singularity-def-files

%labels
    Author: oscarjamescharles@gmail.com


%files
    ./install_stuff.sh /build


# things that run during image build
%post
    # variables required for build
    TZ=Europe/London
    ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone


    # dependencies
    apt install -y default-jdk
    apt install -y python3.10
    apt install -y python3-pip
    apt install -y --no-install-recommends r-base-core
    apt install -y git
    apt install -y cmake
    apt install -y mrc
    apt install -y libboost-all-dev 


    ### data generationg tools
    # psiblast
    apt install -y ncbi-blast+
    # p2rank
    apt install -y python3-pymol
    # netsurfp3 - ref: https://dtu.biolib.com/NetSurfP-3/
    python3 -m pip install -U pybiolib
    # DSSP - https://github.com/PDB-REDO/dssp
    apt install -y wget

    /build/install_stuff.sh


# things that are defined for runtime
%environment


# things that run when called
%runscript
    echo "hello, world!"